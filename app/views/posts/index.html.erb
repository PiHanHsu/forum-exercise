 <div >
     <h1> Posts List </h1>
  </div>

<div>
<%= form_tag posts_path, :method => :get do %>
  <%= text_field_tag "keyword" %>
  <%= submit_tag "Search" %>
<% end %>
<div><br>


<table class = "table table-striped table-bordered ">
  <thead class = "thead">
    <th>
      <%= "Post Title"%>
    </th>
    <th>
       <%= "User"%>
    </th>
     <th>
       <%= "Comments #{}"%>
    </th>
    <th>
       <%= "Action"%>
    </th>
  </thead>
  <tbody>
    <% @posts.each do |post| %>
  <tr>
    <td>
       <%= post.title %>
    </td>
    <td>
       <%= post.try(:user).try(:username) %>
    </td> 
    <td>
       <%= post.try(:comments).try(:count) %>
    </td> 

    <td>
      <%= link_to 'Show', post_path(post), :class => "btn btn-primary" %>
      <%= link_to 'Edit', edit_post_path(post), :class => "btn btn-default" if post.user == current_user %>
      <%= link_to 'Delete', post_path(post, page: params[:page]) ,:method => :delete, :class => "btn btn-danger" if post.user == current_user %>
    </td>
   </tr>
  <% end %>
  </tbody>
	 
</table>

<%= link_to 'Sort by Name', posts_path( :order => "title") %>
<%= link_to 'Sort by Default', posts_path %>

<div>
<%= link_to 'Add New Post', new_post_path, :class => "btn btn-primary" %>
</div>
<div >
<%= paginate @posts %>
</div> 
